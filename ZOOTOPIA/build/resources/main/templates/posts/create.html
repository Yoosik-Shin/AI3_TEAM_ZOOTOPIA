<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<<<<<<< HEAD
  <meta charset="UTF-8">
  <title>ê¸€ì“°ê¸°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/create.css}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css">
  <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css">
  <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
=======
    <meta charset="UTF-8">
    <title>ê¸€ì“°ê¸°</title>
    <link rel="stylesheet" th:href="@{/css/create.css}">
>>>>>>> main
</head>
<body>

<div class="container">
<<<<<<< HEAD
  <form th:action="@{/posts/create}" method="post" onsubmit="return onSubmit()">
=======
    <form th:action="@{/posts/create}" method="post" enctype="multipart/form-data">
>>>>>>> main

        <!-- ì¹´í…Œê³ ë¦¬ -->
        <div class="form-group category-buttons">
            <label>ì¹´í…Œê³ ë¦¬</label><br>
            <input type="radio" id="cate1" name="category" value="ì§ˆë¬¸ê¸€" checked>
            <label for="cate1">ì§ˆë¬¸ìˆì–´ìš”</label>
            <input type="radio" id="cate2" name="category" value="ììœ ê¸€">
            <label for="cate2">ììœ ê²Œì‹œíŒ</label>
        </div>

        <!-- ì œëª© -->
        <div class="form-group">
            <label for="title">ê¸€ ì œëª©</label>
            <input type="text" id="title" name="title" placeholder="ë°˜ë ¤ë™ë¬¼ ìë‘ ì œëª©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”">
        </div>

<<<<<<< HEAD
    <!-- ë³¸ë¬¸ ì—ë””í„° -->
    <div class="form-group mt-3">
      <label>ê¸€ ì‘ì„±</label>
      <div id="editor"></div>
      <input type="hidden" name="content" id="content">
    </div>

    <!-- íƒœê·¸ -->
    <div class="form-group">
      <label for="tags">#íƒœê·¸</label>
      <input type="text" id="tags" name="tags" class="form-control"
             placeholder="íƒœê·¸ë¥¼ ì…ë ¥í•˜ê³  Enter ë˜ëŠ” ì‡¼í•‘(ï¼Œ)ë¡œ êµ¬ë¶„í•˜ì„¸ìš”"
             th:value="${post?.tags}">
    </div>
=======
        <!-- ë‚´ìš© -->
        <div class="form-group">
            <label for="content">ê¸€ ì‘ì„±</label>
            <textarea id="content" name="content" rows="7" placeholder="5ê¸€ì ì´ìƒìœ¼ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”"></textarea>
        </div>

        <!-- ì‚¬ì§„ ì—…ë¡œë“œ -->
        <div class="form-group">
            <label>ì‚¬ì§„ ì—…ë¡œë“œ</label>
            <div class="upload-box">
                <label for="image">ğŸ“· ì‚¬ì§„ì²¨ë¶€</label>
                <input type="file" id="image" name="imageFiles" multiple accept="image/*" onchange="previewImages(event)">
            </div>

            <!-- ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ -->
            <div id="imagePreviewContainer" class="preview-container">
                <!-- JSë¡œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ + ëŒ€í‘œ ì´ë¯¸ì§€ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ì´ ë“¤ì–´ê° -->
            </div>
        </div>

        <!-- ë™ì˜ìƒ ì—…ë¡œë“œ -->
        <div class="form-group">
            <label>ë™ì˜ìƒ ì—…ë¡œë“œ</label>
            <div class="upload-box">
                <label for="video">ğŸ¬ ë™ì˜ìƒ ì²¨ë¶€</label>
                <input type="file" id="video" name="videoFile">
            </div>
        </div>

        <!-- ë“±ë¡ ë²„íŠ¼ -->
        <div class="form-group text-right">
            <button type="submit" class="btn-submit">ê¸€ ë“±ë¡</button>
        </div>
>>>>>>> main

    </form>
</div>


<script>
<<<<<<< HEAD
  // íƒœê·¸ ì²˜ë¦¬
  const input = document.querySelector('#tags');
  const tagify = new Tagify(input, {
    originalInputValueFormat: values => values.map(tag => tag.value).join(',')
  });
  if (input.value) {
    tagify.removeAllTags();
    tagify.addTags(input.value.split(',').map(tag => tag.trim()));
  }

 
  const editor = new toastui.Editor({
    el: document.querySelector('#editor'),
    height: '500px',
    initialEditType: 'wysiwyg',
    previewStyle: 'vertical',
    hooks: {
      addImageBlobHook: async (blob, callback) => {
        const formData = new FormData();
        formData.append('image', blob);
        const res = await fetch('/upload/image', {
          method: 'POST',
          body: formData
        });
        const result = await res.json();
        callback(result.imageUrl);
      }
    }
  });

  // ìœ íš¨ì„± ê²€ì‚¬ ë° ë³¸ë¬¸ ì „ì†¡
  function onSubmit() {
    const title = document.getElementById("title").value.trim();
    const content = editor.getHTML();

    if (title.length < 1) {
      alert("ì œëª©ì„ 1ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      document.getElementById("title").focus();
      return false;
    }
    if (content.replace(/<[^>]*>/g, '').trim().length < 5) {
      alert("ë³¸ë¬¸ì„ 5ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      return false;
    }

    document.getElementById("content").value = content;
    return true;
  }
=======
function previewImages(event) {
    const container = document.getElementById('imagePreviewContainer');
    container.innerHTML = ''; // ì´ˆê¸°í™”

    const files = event.target.files;

    if (files.length === 0) return;

    [...files].forEach((file, idx) => {
        const reader = new FileReader();
        reader.onload = function (e) {
            const wrapper = document.createElement('div');
            wrapper.classList.add('preview-item');

            wrapper.innerHTML = `
                <img src="${e.target.result}" width="100" height="100" alt="preview">
                <div>
                    <label>
                        <input type="radio" name="thumbnailIndex" value="${idx}" ${idx === 0 ? 'checked' : ''}>
                        ëŒ€í‘œ ì´ë¯¸ì§€
                    </label>
                </div>
            `;
            container.appendChild(wrapper);
        };
        reader.readAsDataURL(file);
    });
}
>>>>>>> main
</script>

</body>
</html>
